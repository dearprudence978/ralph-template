# Progress File Template

This template shows the structure of `ralph-specs/progress.txt`. The skill auto-populates this file during codebase analysis.

---

## Template Structure

```markdown
# Progress Log - [PROJECT_NAME]
# Auto-generated by codebase analysis on [DATE]
# Ralph reads this at the start of each iteration

## Codebase Patterns

### Project Type
- Language: [TypeScript/JavaScript/Python/etc.]
- Framework: [Express/Next.js/FastAPI/etc.]
- Package Manager: [npm/yarn/pnpm/pip/etc.]
- Node Version: [from .nvmrc or engines]

### Code Style (detected from existing files)
- Naming: [camelCase for variables, PascalCase for types]
- Exports: [Named exports / Default exports]
- Functions: [Arrow functions / Function declarations]
- Async: [async/await / Promises]
- Semicolons: [Yes / No]
- Quotes: [Single / Double]
- Indentation: [2 spaces / 4 spaces / tabs]

### File Organization (detected from directory structure)
- Source root: [src/ / app/ / lib/]
- Services: [src/services/*.service.ts]
- Types: [src/types/*.ts]
- Utils: [src/utils/]
- Routes: [src/routes/]
- Controllers: [src/controllers/]
- Middleware: [src/middleware/]
- Tests: [Co-located *.test.ts / __tests__/ folder]

### Database
- ORM: [Prisma / Drizzle / TypeORM / None]
- Database: [PostgreSQL / MySQL / SQLite / MongoDB]
- Schema: [prisma/schema.prisma]
- Migrate: [npm run db:migrate]
- Generate: [npm run db:generate]
- Seed: [npm run db:seed]

### Testing
- Framework: [Jest / Vitest / Mocha]
- Run all: [npm run test]
- Run specific: [npm run test -- --grep 'pattern']
- Coverage: [npm run test:coverage]

### Available Scripts (from package.json)
- Dev: [npm run dev]
- Build: [npm run build]
- Start: [npm run start]
- Test: [npm run test]
- Lint: [npm run lint]
- Type check: [npm run typecheck]

### Key Dependencies Already Installed
- [package@version] - [what it's for]
- [package@version] - [what it's for]

### Existing Utilities to Reuse
- [src/utils/logger.ts] - Logging utility
- [src/errors/AppError.ts] - Base error class
- [src/middleware/validate.ts] - Validation middleware

### Known Patterns from Existing Code
- [Pattern 1 observed in codebase]
- [Pattern 2]
- [Pattern 3]

### Environment Variables (from .env.example)
- [VAR_NAME] - [description]

---

## Current Work

[Ralph updates this section when starting a story]

### Template:
```
Story: [STORY_ID] - [Title]
Started: [timestamp]
Status: IN_PROGRESS | BLOCKED | COMPLETED
Plan:
- [ ] Step 1
- [ ] Step 2
- [ ] Step 3
```

---

## Completed Stories
[Ralph appends here as stories complete]

### [STORY_ID]: [Title]
- Completed: [timestamp]
- Files: [comma-separated list of files modified]
- Verification: [summary of verification commands run]
- Notes: [key implementation details, gotchas encountered]

---

## Learnings
[Ralph appends here to avoid repeating mistakes]

### Iteration [N]
- [Learning 1]
- [Learning 2]

---

## Blockers Encountered
[Ralph documents blocking issues here]

### [STORY_ID] - [Date]
- Issue: [description]
- Resolution: [how it was resolved, or "BLOCKED"]
```

---

## What Gets Auto-Populated

The codebase analysis phase automatically fills in:

| Section | Source |
|---------|--------|
| Project Type | `package.json`, config files, file extensions |
| Code Style | Sampling 2-3 existing source files |
| File Organization | Directory structure scan |
| Database | Prisma/Drizzle/TypeORM config files |
| Testing | Jest/Vitest/Mocha config files |
| Available Scripts | `package.json` scripts section |
| Key Dependencies | `package.json` dependencies |
| Existing Utilities | Source file analysis |
| Known Patterns | Code pattern detection |
| Environment Variables | `.env.example` or `.env.sample` |

---

## What You Should Add Manually

After generation, review and add:

1. **Team conventions** not visible in code
2. **Gotchas** you've learned the hard way
3. **Preferences** for this specific feature
4. **Context** about related systems

### Example Manual Additions

```markdown
### Additional Team Conventions
- Always use feature flags for new features
- PR titles must follow conventional commits format
- Never commit directly to main branch
- All API changes need OpenAPI spec updates

### Known Gotchas
- The legacy auth in src/old-auth/ should be ignored
- Rate limiting is handled by nginx, not the app
- Don't use UserModel directly, always use UserService
- WebSocket connections need special CORS handling

### Context for This Feature
- This replaces the old notification system in src/legacy/
- Must maintain backwards compatibility with mobile app v2.x
- Related feature: src/features/alerts/ uses similar patterns
- Design mockups: [link to Figma]

### Performance Considerations
- User table has 10M+ rows, always use indexed queries
- Avoid N+1 queries on the notifications endpoint
- Cache user preferences (TTL: 5 minutes)
```

---

## How Ralph Uses This File

**READ Checkpoints:**
1. **Start of each iteration**: Read entire file to understand context
2. **Before starting a story**: Check Current Work for in-progress items
3. **Before common operations**: Check Learnings for gotchas to avoid
4. **When blocked**: Check Blockers for similar resolved issues

**WRITE Checkpoints:**
1. **When starting a story**: Update Current Work with story ID, timestamp, plan
2. **When discovering a pattern**: Immediately append to Learnings
3. **When blocked 3+ times**: Append to Blockers with attempts tried
4. **When completing a story**: Append to Completed Stories, clear Current Work
5. **When resolving a blocker**: Update Blockers entry with resolution

**The Relay Baton Pattern:**
Think of progress.txt as a relay race baton. Each iteration:
1. Receives context from past iterations (READ)
2. Makes meaningful progress on one story
3. Leaves clear notes for future iterations (WRITE)

This prevents context drift where the model forgets earlier reasoning.

---

## For Greenfield Projects

If minimal existing code is detected, the analysis generates **recommended patterns** based on:
- Tech stack mentioned in discovery phase
- Common conventions for that stack
- Industry best practices

These are clearly marked:

```markdown
### Code Style (Recommended - minimal existing code)
- Naming: camelCase for variables, PascalCase for types/interfaces
- Exports: Named exports (better for tree-shaking)
- Functions: Arrow functions for consistency
- Async: async/await (cleaner than .then() chains)
- Semicolons: Yes (explicit is better)
- Quotes: Single quotes
- Indentation: 2 spaces
```

You can modify these recommendations before running Ralph.
